{"version":3,"file":"static/js/77.11633d30.chunk.js","mappings":"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","sources":["components/product/AddProductForm.js"],"sourcesContent":["import React from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport Swal from 'sweetalert2';\r\nimport axios from 'axios';\r\nimport { reset, changeCurrentPrice, changeDescription, changeName, changePrice, changeImage } from '../../redux/slides/NewProductSlide';\r\n\r\nexport const AddProductForm = () => {\r\n    const dispatch = useDispatch();\r\n    const { name, description, price, currentPrice, image } = useSelector(state => state.newProduct);\r\n    const navigate = useNavigate();\r\n\r\n    const isValidated = () => {\r\n        if (name.trim().length === 0) {\r\n            return 'Tên sản phẩm không được để trống!';\r\n        }\r\n\r\n        if (description.trim().length === 0) {\r\n            return 'Mô tả không được để trống!';\r\n        }\r\n\r\n        if (price <= 0) {\r\n            return 'Giá gốc phải lớn hơn 0!';\r\n        }\r\n\r\n        if (currentPrice <= 0) {\r\n            return 'Ưu đãi phải lớn hơn 0!';\r\n        }\r\n\r\n        if (currentPrice >= price) {\r\n            console.log(price, currentPrice);\r\n            return 'Ưu đãi phải nhỏ hơn giá gốc!';\r\n        }\r\n\r\n        return '';\r\n    };\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n\r\n        const message = isValidated();\r\n\r\n        if (message.length > 0) {\r\n            Swal.fire({\r\n                title: 'Lỗi!',\r\n                text: message,\r\n                icon: 'error',\r\n            });\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const response = await axios.post(`http://localhost:3001/products`, {\r\n                name,\r\n                description,\r\n                price,\r\n                currentPrice,\r\n                image,\r\n            });\r\n\r\n            if (response.status === 201) {\r\n                Swal.fire({\r\n                    title: 'Thành công!',\r\n                    text: 'Thêm sản phẩm thành công!',\r\n                    icon: 'success',\r\n                }).then(() => {\r\n                    dispatch(reset());\r\n                    navigate('/hextech/products');\r\n                });\r\n            }\r\n        } catch (error) {\r\n            console.error('Error adding product:', error);\r\n            Swal.fire({\r\n                title: 'Lỗi!',\r\n                text: 'Không thể thêm sản phẩm. Vui lòng thử lại!',\r\n                icon: 'error',\r\n            });\r\n        }\r\n    };\r\n\r\n    const handleImageChange = (e) => {\r\n        const file = e.target.files[0];\r\n        const reader = new FileReader();\r\n\r\n        reader.onloadend = () => {\r\n            dispatch(changeImage(reader.result));\r\n        };\r\n\r\n        if (file) {\r\n            reader.readAsDataURL(file);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"container mt-5 w-50 shadow-lg py-5\">\r\n            <div className=\"mx-5\">\r\n                <h6 className=\"display-6 mb-4 text-center\">Thêm sản phẩm</h6>\r\n\r\n                <form onSubmit={handleSubmit}>\r\n                    <div className=\"d-flex flex-column align-items-center mb-3\">\r\n                        <label htmlFor=\"input-name\" className=\"form-label w-75 text-start\">Tên sản phẩm</label>\r\n                        <input\r\n                            type=\"text\"\r\n                            className=\"form-control w-75\"\r\n                            id=\"input-name\"\r\n                            value={name}\r\n                            autoComplete=\"off\"\r\n                            onChange={(e) => dispatch(changeName(e.target.value.replace(/\\s/g, '')))}\r\n                            required\r\n                        />\r\n                    </div>\r\n                    <div className=\"d-flex flex-column align-items-center mb-3\">\r\n                        <label htmlFor=\"input-price\" className=\"form-label w-75 text-start\">Giá gốc</label>\r\n                        <input\r\n                            type=\"number\"\r\n                            className=\"form-control w-75\"\r\n                            id=\"input-price\"\r\n                            value={price}\r\n                            autoComplete=\"off\"\r\n                            onChange={(e) => dispatch(changePrice(Number(e.target.value)))}\r\n                            required\r\n                        />\r\n                    </div>\r\n                    <div className=\"d-flex flex-column align-items-center mb-3\">\r\n                        <label htmlFor=\"input-currentPrice\" className=\"form-label w-75 text-start\">Ưu đãi</label>\r\n                        <input\r\n                            type=\"number\"\r\n                            className=\"form-control w-75\"\r\n                            id=\"input-currentPrice\"\r\n                            value={currentPrice}\r\n                            autoComplete=\"off\"\r\n                            onChange={(e) => dispatch(changeCurrentPrice(Number(e.target.value)))}\r\n                            required\r\n                        />\r\n                    </div>\r\n                    <div className=\"d-flex flex-column align-items-center mb-3\">\r\n                        <label htmlFor=\"input-description\" className=\"form-label w-75 text-start\">Mô tả</label>\r\n                        <textarea\r\n                            className=\"form-control w-75\"\r\n                            id=\"input-description\"\r\n                            value={description}\r\n                            autoComplete=\"off\"\r\n                            onChange={(e) => dispatch(changeDescription(e.target.value))}\r\n                            required\r\n                        />\r\n                    </div>\r\n                    <div className=\"d-flex flex-column align-items-center mb-3\">\r\n                        <label htmlFor=\"input-image\" className=\"form-label w-75 text-start\">Hình ảnh</label>\r\n                        <input\r\n                            type=\"file\"\r\n                            className=\"form-control w-75\"\r\n                            id=\"input-image\"\r\n                            accept=\"image/*\"\r\n                            autoComplete=\"off\"\r\n                            onChange={handleImageChange}\r\n                            required\r\n                        />\r\n                        {image && <img src={image} alt=\"preview\" className=\"w-75 mt-3\" />}\r\n                    </div>\r\n                    <div className=\"d-flex justify-content-center mt-4\">\r\n                        <button\r\n                            type=\"button\"\r\n                            className=\"btn btn-secondary col-3\"\r\n                            style={{ marginRight: '20px' }}\r\n                            onClick={() => navigate(-1)}\r\n                        >\r\n                            Quay lại\r\n                        </button>\r\n                        <button type=\"submit\" className=\"btn btn-primary col-3\">\r\n                            Thêm sản phẩm\r\n                        </button>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default AddProductForm;\r\n"],"names":["AddProductForm","dispatch","useDispatch","name","description","price","currentPrice","image","useSelector","state","newProduct","navigate","useNavigate","_jsx","className","children","_jsxs","onSubmit","async","e","preventDefault","message","trim","length","console","log","Swal","title","text","icon","axios","post","status","then","reset","error","htmlFor","type","id","value","autoComplete","onChange","changeName","target","replace","required","changePrice","Number","changeCurrentPrice","changeDescription","accept","file","files","reader","FileReader","onloadend","changeImage","result","readAsDataURL","src","alt","style","marginRight","onClick"],"sourceRoot":""}